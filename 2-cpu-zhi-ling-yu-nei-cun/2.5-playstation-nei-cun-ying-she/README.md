# 2.4 PlayStation 内存映射

PS1的CPU以相同方式处理所有的地址，而有时加载/存储请求必须分配给正确的外围设备。如果我们读取BIOS而得到GPU的数据就会有问题。

那么我们怎么知道在任意地址上映射的是什么呢?当然是通过使用内存映射了!

以下是PlayStation内存映射的概述，由[Nocash specs](http://problemkaputt.de/psx-spx.htm#cpuspecifications)(本书翻译完后翻译)提供:

表一：PlayStation 内存映射

| KUSEG      | KSEG0      | KSEG1      | 长度    | 解释       |
| ---------- | ---------- | ---------- | ----- | -------- |
| 0x00000000 | 0x80000000 | 0xa0000000 | 2048K | 主RAM     |
| 0x1f000000 | 0x9f000000 | 0xbf000000 | 8192K | 扩展区域1    |
| 0x1f800000 | 0x9f800000 | 0xbf800000 | 1K    | 暂存器      |
| 0x1f801000 | 0x9f801000 | 0xbf801000 | 8K    | 硬件寄存器    |
| 0x1fc00000 | 0x9fc00000 | 0xbfc00000 | 512K  | BIOS ROM |

让我们来分析一下。

我们可以看到，表1中的大多数外设都映射在几个地址上。例如，如果我们看到PC的重置值0xbfc00000对应于区域KSEG1第五行中BIOS范围的开始。然而，我们也可以通过地址0x1fc00000（KUSEG）和0x9fc00000（KSEG0）到达相同的位置。

有这些镜像地址区段有什么意义呢?KUSEG和KSEG1有什么区别呢?其用于指定内存访问的某些属性。在PS1硬件上，它主要用于指定其访问是否被缓存。

现在，我们忽略那些区域，对所有的映射都一视同仁，以后再更仔细地研究它们。

表二：KSEG2内存映射

| KSEG2     | 长度   | 解释    |
| --------- | ---- | ----- |
| xfffe0000 | 512B | I/O端口 |

表二是最后一个内存区域:KSEG2。它和其他的有点不同，没有镜像区域，而是提供对一组独特的寄存器的访问。据我所知，那里唯一重要的寄存器是缓存控制器，但可能有我不知道的寄存器。
